# Print Shop Back Changelog
Все изменения сервиса аутентификации будут документироваться на этой странице.

## 2023-09-13
### Changed
- Все общие компоненты были вынесены в отдельные проекты: go-sysmess, go-webcore, go-storage, go-components, в связи с этим были полностью переработаны все связи проекта;
- Обновлены все версии библиотек, от которых зависит проект;

## 2023-08-28
### Added
- Добавлен mrlib.Helper для помощи запуска сервиса;
- Добавлен MiddlewareUserIp() для получения IP текущего пользователя;

### Changed
- Создание соединения postgres перенесено в отдельный класс фабрики;
- Переработаны константы URL адресов методов API;
- Доработано оформление кода логирования событий;
- Изменён интерфейс ClientData, метод SendResponseWithError упразднён;
- Доработана система обработки ошибок в контроллере;
- Метод mrpostgres.ConnAdapter.Close() приведён к стандартному интерфейсу;

## 2023-07-27
### Changed
- Изменена валидация поля article, теперь доступны все символы кроме пробельных;
- Переименованы `ErrHttpRequestEnumLen` -> `ErrHttpRequestParamLen` и `ErrHttpRequestParseEnum` -> `ErrHttpRequestParseParam` для обобщения;

### Fixed
- Добавлено забытое поле `Sides` в `entity.CatalogPaper`;
- Скорректированы значение валидаторов (min, max, lte)ж
- Добавлен пропущенный фильтр `App.Request.Query.ItemStatuses` в API документацию;
- `*Remove` -> `*RemoveURL`;
- В методах формирования списков заменён: `client.Query` -> `client.SqQuery`;

## 2023-07-23
### Add
- Добавлена возможность обновления только указанных полей структуры;
- Добавлено несколько именованных ошибок: `ErrInternalInvalidType`, `ErrInternalInvalidData`, `ErrDataContainer`;
- Добавлено `mrentity.EmptynullString` для сохранения NULL значений в БД;

### Changed
- В метод SqUpdate перенесена логика проверки обновления записи;

### Fixed
- Поправлена регулярка для поиска параметров в сообщении, теперь в параметрах могут быть цифры; 

## 2023-07-22
### Add
- Добавлены дополнительные ограничения в таблицы БД;
- Для модельных объектов добавлены константные имена `const ModelName*`, которое используется при логировании событий и ошибок связанных с этими компонентами;
- Добавлена структура mrerr.Arg для передачи какой-либо информации в логи;
- Добавлено несколько именованных ошибок: `ErrInternalNilPointer`, `ErrStorageFetchedInvalidData`;
- Добавлены методы работы с БД в связке с `squirrel` (см. `conn_squirrel.go`)

### Changed
- Доработан механизм сортировки элементов, он был оформлен в компонент `ItemOrderer`. Его задачи: организовывать порядок следования элементов конкретного списка и перемещать эти элементы в рамках этого списка;

### Removed
- Удалён метод NewWithData, вместо него нужно использовать `New(mrerr.Arg{...})`;

## 2023-07-16
### Add
- Добавлен paramName в модуль `form_data`;
- Добавлен компонент для компиляции структуры, на основе которой формируются пользовательские интерфейсы для калькуляции продукции;
- В интерфейс `ClientData` добавлен метод `WithContext`;
- Добавлена именованная ошибка `ErrInternalParseData`;

### Changed
- GO_TOOLS утилиты теперь не устанавливаются по умолчанию;
- В ошибке, формируемой во wrapError, теперь выводится информация о том, в каком методе разработчика она произошла, а не там, где её породила библиотека ядра;
- Во всех `regexp.MustCompile` добавлены raw strings во избежание двойного экранирования символов;

### Fixed
- Исправлен баг при сохранении id формы в контекст;
- Исправлен баг при добавлении поля формы, проверка `paramName` проходила раньше, чем этот параметр заполнялся из шаблона;
- Добавлен omitempty в описание валидации необязательных полей;
- Исправлен синтаксис sql в некоторых запросах;
- Исправлен баг с защитой от бесконечного цикла при формировании ошибки;
- В `FormFieldItemOrderer` добавлены пропущенные проверки ошибок;

## 2023-07-14
### Added
- Доработан проект для его развёртывания утилитой Mrcmd;
- Добавлена ещё одна настройка переменной MRCMD_SHARED_PLUGINS_ENABLED для альтернативного варианта разработки;

### Changed
- Переименован пакет `calc-user-data-back-adm -> print-shop-back`;

## 2023-07-10
### Added
- Внедрена библиотека `squirrel` для формирования SQL запросов;

## 2023-07-10
### Added
- Внедрена библиотека `squirrel` для формирования SQL запросов;

## 2023-07-07
### Added
- Произведён рефакторинг механизма обработки ошибок, добавлена фабрика для создания ошибок;

## 2023-05-13
### Changed
- Доработан механизм обработки ошибок, logger и валидация внешних данных;

## 2023-05-12
### Added
- Загружена версия проекта с несколькими реализованными методами API аутентификации;